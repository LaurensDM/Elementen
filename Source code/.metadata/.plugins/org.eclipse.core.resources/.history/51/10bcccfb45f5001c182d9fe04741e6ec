package gui;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

import domein.DomeinController;
import javafx.animation.AnimationTimer;
import javafx.geometry.HPos;
import javafx.geometry.Insets;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.layout.GridPane;

public class SageDialogue extends GridPane {

	private Button lvl1Skill = new Button("Learn");
	private Button lvl5Skill = new Button("Learn");
	private Button lvl10Skill = new Button("Learn");
	private Button lvl15Skill = new Button("Learn");
	private Button lvl20Skill = new Button("Learn");
	private Button lvl25Skill = new Button("Learn");
	private Button lvl30Skill = new Button("Learn");
	private Button lvl35Skill = new Button("Learn");
	private Button lvl40Skill = new Button("Learn");
	private Button lvl45Skill = new Button("Learn");
	private Button lvl50Skill = new Button("Learn");

	private List<Button> skillListBtn = new ArrayList<>();

	private Label lvl1SkillLbl = new Label("Improve mana efficiëncy");
	private Label lvl5SkillLbl = new Label("Improve accuracy");
	private Label lvl10SkillLbl = new Label("Improve mana density (power)");
	private Label lvl15SkillLbl = new Label("Improve mana efficiëncy II");
	private Label lvl20SkillLbl = new Label("Improve accuracy II");
	private Label lvl25SkillLbl = new Label("Improve mana desnity (power) II");
	private Label lvl30SkillLbl = new Label("Reflection shield");
	private Label lvl35SkillLbl = new Label("Improve mana efficiëncy III");
	private Label lvl40SkillLbl = new Label("Improve accuracy III");
	private Label lvl45SkillLbl = new Label("Improve mana density (power) III");
	private Label lvl50SkillLbl = new Label("Fusion Magic");

	List<Label> skillListlbl = new ArrayList<>();

	Label error = new Label();

	private int columnLabel = 0;
	private int columnButton = 1;
	private DomeinController dc;
	int lastRow = 0;

	AnimationTimer timer;
	private int teller = 0;

	public SageDialogue(DomeinController dc) {
		this.dc = dc;
		this.setVgap(10);
		this.setHgap(10);
		this.setPadding(new Insets(20));
		Collections.addAll(skillListBtn, lvl1Skill, lvl5Skill, lvl10Skill, lvl15Skill, lvl20Skill, lvl25Skill,
				lvl30Skill, lvl35Skill, lvl40Skill, lvl45Skill, lvl50Skill);

		Collections.addAll(skillListlbl, lvl1SkillLbl, lvl5SkillLbl, lvl10SkillLbl, lvl15SkillLbl, lvl20SkillLbl,
				lvl25SkillLbl, lvl30SkillLbl, lvl35SkillLbl, lvl40SkillLbl, lvl45SkillLbl, lvl50SkillLbl);

		for (int i = 0, row = 0; i < skillListBtn.size(); i++, row += 2) {
			if (i == 6) {
				columnButton = 3;
				columnLabel = 2;
				row = 0;
			}
			if (i > 5) {

				GridPane.setMargin(skillListlbl.get(i), new Insets(0, 0, 0, 20));
			}

			this.add(skillListBtn.get(i), columnButton, row);
			this.add(skillListlbl.get(i), columnLabel, row);

			Label label = new Label("");
			label.setVisible(false);
			GridPane.setColumnSpan(label, 2);
			this.add(label, 0, row + 1);

			if (row > lastRow) {
				lastRow = row;
			}
		}

		GridPane.setColumnSpan(error, 4);
		GridPane.setHalignment(error, HPos.CENTER);
		this.add(error, 0, lastRow + 2);
		events();

		error.setVisible(false);
	}

	private void events() {
		lvl1Skill.setOnAction(evt -> {
			error.setText("");
		});

		lvl5Skill.setOnAction(evt -> {
			if (dc.getPlayerLevel() < 5) {
				error.setVisible(true);
				error.setText(
						"It is too early for you to learn this technique, come back when you've reached level 5!");

				timer();

			}

		});
		lvl10Skill.setOnAction(evt -> {

		});
		lvl15Skill.setOnAction(evt -> {

		});
		lvl20Skill.setOnAction(evt -> {

		});
		lvl25Skill.setOnAction(evt -> {

		});
		lvl30Skill.setOnAction(evt -> {

		});
		lvl35Skill.setOnAction(evt -> {

		});

		lvl40Skill.setOnAction(evt -> {

		});
		lvl45Skill.setOnAction(evt -> {

		});
		lvl50Skill.setOnAction(evt -> {

		});

		lvl1SkillLbl.setOnMouseEntered(evt -> {
			Label label = (Label) this.getChildren().get(GridPane.getRowIndex(lvl1SkillLbl) + 2);
			label.setText("This skill will reduce the amount of mana spent per attack");
			label.setVisible(true);
		});

		lvl1SkillLbl.setOnMouseExited(evt -> {
			Label label = (Label) this.getChildren().get(GridPane.getRowIndex(lvl1SkillLbl) + 2);
			label.setVisible(false);
		});

		lvl5SkillLbl.setOnMouseEntered(evt -> {

		});

		lvl5SkillLbl.setOnMouseExited(evt -> {

		});
		lvl10SkillLbl.setOnMouseEntered(evt -> {

		});

		lvl10SkillLbl.setOnMouseExited(evt -> {

		});
		lvl15SkillLbl.setOnMouseEntered(evt -> {

		});

		lvl15SkillLbl.setOnMouseExited(evt -> {

		});
		lvl20SkillLbl.setOnMouseEntered(evt -> {

		});

		lvl20SkillLbl.setOnMouseExited(evt -> {

		});
		lvl25SkillLbl.setOnMouseEntered(evt -> {

		});

		lvl25SkillLbl.setOnMouseExited(evt -> {

		});
		lvl30SkillLbl.setOnMouseEntered(evt -> {

		});

		lvl30SkillLbl.setOnMouseExited(evt -> {

		});
		lvl35SkillLbl.setOnMouseEntered(evt -> {

		});

		lvl35SkillLbl.setOnMouseExited(evt -> {

		});
		lvl40SkillLbl.setOnMouseEntered(evt -> {

		});

		lvl40SkillLbl.setOnMouseExited(evt -> {

		});
		lvl45SkillLbl.setOnMouseEntered(evt -> {

		});

		lvl45SkillLbl.setOnMouseExited(evt -> {

		});
		lvl50SkillLbl.setOnMouseEntered(evt -> {

		});

		lvl50SkillLbl.setOnMouseExited(evt -> {

		});
	}

	private void timer() {
		
		if (timer!=null) {
			timer.stop();
		}
		
		timer = new AnimationTimer() {

			@Override
			public void handle(long arg0) {
				teller++;
				if (teller == 300) {
					error.setVisible(false);
					teller = 0;
					timer.stop();
				}

			}
		};

		timer.start();
	}

}
